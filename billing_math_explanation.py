import model

print("ðŸ§® BILLING CONTROLS - MATH EXPLANATION")
print("="*60)
print()

rates = model.default_rates()

print("ðŸ“Š HOW EACH CONTROL CALCULATES REVENUE:")
print("-"*50)
print()

print("ðŸ”µ ELIGIBILITY RATES (% of patients):")
print("-"*35)
print("These multiply the base rate by the percentage of eligible patients")
print()
print("99454 Device Eligibility:")
print(f"  Revenue = ${rates['99454']['rate']:.2f} Ã— (slider% Ã· 100) Ã— total_patients")
print(f"  Example: ${rates['99454']['rate']:.2f} Ã— 0.90 Ã— 10,000 = ${rates['99454']['rate'] * 0.90 * 10000:,.0f}/month")
print()

print("99457 Management Eligibility:")
print(f"  Revenue = ${rates['99457']['rate']:.2f} Ã— (slider% Ã· 100) Ã— total_patients")
print(f"  Example: ${rates['99457']['rate']:.2f} Ã— 0.85 Ã— 10,000 = ${rates['99457']['rate'] * 0.85 * 10000:,.0f}/month")
print()

print("99091 MD Review Eligibility:")
print(f"  Revenue = ${rates['99091']['rate']:.2f} Ã— (slider% Ã· 100) Ã— total_patients")
print(f"  Example: ${rates['99091']['rate']:.2f} Ã— 0.50 Ã— 10,000 = ${rates['99091']['rate'] * 0.50 * 10000:,.0f}/month")
print()

print("99490 CCM Eligibility:")
print(f"  Revenue = ${rates['99490']['rate']:.2f} Ã— (slider% Ã· 100) Ã— total_patients")
print(f"  Example: ${rates['99490']['rate']:.2f} Ã— 0.60 Ã— 10,000 = ${rates['99490']['rate'] * 0.60 * 10000:,.0f}/month")
print()

print("99426 PCM Eligibility:")
print(f"  Revenue = ${rates['99426']['rate']:.2f} Ã— (slider% Ã· 100) Ã— total_patients")
print(f"  Example: ${rates['99426']['rate']:.2f} Ã— 0.15 Ã— 10,000 = ${rates['99426']['rate'] * 0.15 * 10000:,.0f}/month")
print()

print("ðŸ”¶ SERVICE INTENSITY FACTORS (direct multipliers):")
print("-"*45)
print("These are direct factors that multiply the base rate AND built-in multiplier")
print()
print("99458 Additional Session Factor:")
print(f"  Revenue = ${rates['99458']['rate']:.2f} Ã— {rates['99458']['multiplier']} (built-in) Ã— factor Ã— total_patients")
print(f"  Example: ${rates['99458']['rate']:.2f} Ã— 1.35 Ã— 0.40 Ã— 10,000 = ${rates['99458']['rate'] * 1.35 * 0.40 * 10000:,.0f}/month")
print(f"  If factor â†’ 0.60: ${rates['99458']['rate']:.2f} Ã— 1.35 Ã— 0.60 Ã— 10,000 = ${rates['99458']['rate'] * 1.35 * 0.60 * 10000:,.0f}/month")
print(f"  Difference: ${(rates['99458']['rate'] * 1.35 * 0.60 - rates['99458']['rate'] * 1.35 * 0.40) * 10000:,.0f}/month more")
print()

print("99439 Additional CCM Factor:")
print(f"  Revenue = ${rates['99439']['rate']:.2f} Ã— {rates['99439']['multiplier']} (built-in) Ã— factor Ã— total_patients")
print(f"  Example: ${rates['99439']['rate']:.2f} Ã— 1.20 Ã— 0.20 Ã— 10,000 = ${rates['99439']['rate'] * 1.20 * 0.20 * 10000:,.0f}/month")
print(f"  If factor â†’ 0.30: ${rates['99439']['rate']:.2f} Ã— 1.20 Ã— 0.30 Ã— 10,000 = ${rates['99439']['rate'] * 1.20 * 0.30 * 10000:,.0f}/month")
print(f"  Difference: ${(rates['99439']['rate'] * 1.20 * 0.30 - rates['99439']['rate'] * 1.20 * 0.20) * 10000:,.0f}/month more")
print()

print("ðŸ“ˆ IMPACT EXAMPLES:")
print("-"*20)
print("On 10,000 patients, changing:")
print(f"â€¢ Device Eligibility 90% â†’ 95% = +${rates['99454']['rate'] * 0.05 * 10000:,.0f}/month")
print(f"â€¢ Additional Session Factor 0.4 â†’ 0.6 = +${rates['99458']['rate'] * 1.35 * 0.20 * 10000:,.0f}/month")
print(f"â€¢ CCM Eligibility 60% â†’ 70% = +${rates['99490']['rate'] * 0.10 * 10000:,.0f}/month")
print(f"â€¢ Additional CCM Factor 0.2 â†’ 0.3 = +${rates['99439']['rate'] * 1.20 * 0.10 * 10000:,.0f}/month")
print()

print("ðŸŽ¯ KEY DIFFERENCE:")
print("-"*18)
print("ELIGIBILITY RATES: 'What % of patients get this service at all?'")
print("INTENSITY FACTORS: 'How much of this service do they need?'")
print()
print("Both directly multiply the base billing rate to calculate total revenue.")